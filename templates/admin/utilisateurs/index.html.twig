{# templates/admin/utilisateurs/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Liste des Utilisateurs{% endblock %}

{% block body %}
<div class="container mt-5">
	<div class="card shadow-sm">
		<div class="card-header bg-primary text-white text-center">
			<h2 class="mb-0">Liste des Utilisateurs</h2>
		</div>
		<div class="card-body p-0">
			<div class="table-responsive">
				<table class="table table-bordered  table-hover table-striped mb-0">
					<thead class="table-light">
						<tr>
							<th>Id</th>
							<th>Email</th>
							<th>Rôle</th>
							<th>Nom</th>
							<th>Prénom</th>
							<th>Code Postal</th>
							<th>Ville</th>
							<th>Date Invitation</th>
							<th class="text-center">Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for utilisateur in utilisateurs %}
							<tr>
								<td>{{ utilisateur.id }}</td>
								<td>{{ utilisateur.email }}</td>
								<td>
									<span class="badge 
										{% if utilisateur.role == 'ROLE_ADMIN' %}
											bg-danger
										{% elseif utilisateur.role == 'ROLE_GESTIONNAIRE' %}
											bg-warning text-dark
										{% else %}
											bg-primary
										{% endif %}
									">
										{{ utilisateur.role|replace({'ROLE_': ''}) }}
									</span>
								</td>
								<td>{{ utilisateur.nom }}</td>
								<td>{{ utilisateur.prenom }}</td>
								<td>{{ utilisateur.codepostal }}</td>
								<td>{{ utilisateur.ville }}</td>
								<td>{{ utilisateur.dateInvitation|date('d/m/Y H:i') }}</td>
								<td class="text-center">
									<a href="{{ path('app_utilisateurs_show', {'id': utilisateur.id}) }}" class="btn btn-sm btn-outline-info me-1">
										<i class="bi bi-eye"></i> Voir
									</a>
									<a href="{{ path('app_utilisateurs_edit', {'id': utilisateur.id}) }}" class="btn btn-sm btn-outline-warning">
										<i class="bi bi-pencil"></i> Éditer
									</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="9" class="text-center text-muted py-4">Aucun utilisateur trouvé</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div class="text-end mt-3">
		<a href="{{ path('app_utilisateurs_new') }}" class="btn btn-success shadow-sm">
			<i class="bi bi-plus-circle"></i> Créer un nouvel utilisateur
		</a>
	</div>
</div>

{% endblock %}



{# {% extends 'base.html.twig' %}

{% block title %}Utilisateurs index{% endblock %}

{% block body %}
    <h1>Utilisateurs index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nom</th>
                <th>Prenom</th>
                <th>Email</th>
                <th>Role</th>
                <th>DateInvitation</th>
                <th>Password</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for utilisateur in utilisateurs %}
            <tr>
                <td>{{ utilisateur.id }}</td>
                <td>{{ utilisateur.nom }}</td>
                <td>{{ utilisateur.prenom }}</td>
                <td>{{ utilisateur.email }}</td>
                <td>{{ utilisateur.role }}</td>
                <td>{{ utilisateur.dateInvitation ? utilisateur.dateInvitation|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ utilisateur.password }}</td>
                <td>
                    <a href="{{ path('app_utilisateurs_show', {'id': utilisateur.id}) }}">show</a>
                    <a href="{{ path('app_utilisateurs_edit', {'id': utilisateur.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="8">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_utilisateurs_new') }}">Create new</a>
{% endblock %} #}
